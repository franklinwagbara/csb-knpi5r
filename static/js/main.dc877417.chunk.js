(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{30:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(22),a=n(11),u=n(3),o=(n(30),n(8)),s=n.n(o),i=n(2);function j(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(1),o=Object(u.a)(a,2),s=o[0],j=o[1],O=b({query:n,pageNumber:s}),l=Object(u.a)(O,3),p=l[0],f=l[1],d=l[2],h=Object(c.useRef)(),g=Object(c.useCallback)((function(e){f||(h.current&&h.current.disconnect(),h.current=new IntersectionObserver((function(e){e[0].isIntersecting&&d&&j((function(e){return e+1}))})),e&&h.current.observe(e))}),[f,d]);return console.log(p[0]),Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)("input",{type:"text",value:n,onChange:function(e){r(e.target.value),j(1)}}),p&&p.map((function(e,t){return t+1===p.length?Object(i.jsx)("p",{ref:g},e.key):Object(i.jsxs)("p",{children:[e.title," "]},e.key)})),d&&Object(i.jsx)("p",{children:"load more..."}),f&&Object(i.jsx)("p",{children:"Loading..."})]})}var b=function(e){var t=e.query,n=e.pageNumber,r=Object(c.useState)([]),o=Object(u.a)(r,2),i=o[0],j=o[1],b=Object(c.useState)(!1),O=Object(u.a)(b,2),l=O[0],p=O[1],f=Object(c.useState)(!1),d=Object(u.a)(f,2),h=d[0],g=d[1];return Object(c.useEffect)((function(){var e;return p(!0),g(!1),s()({method:"GET",url:"https://openlibrary.org/search.json",params:{q:t,page:n},cancelToken:new s.a.CancelToken((function(t){return e=t}))}).then((function(e){j((function(t){return Object(a.a)(new Set(Object(a.a)(e.data.docs)))})),p(!1),e.data.docs.length>0&&g(!0)})).catch((function(e){s.a.isCancel(e)})),console.log("quer",t),function(){return e()}}),[t,n]),[i,l,h]},O=document.getElementById("root");Object(r.createRoot)(O).render(Object(i.jsx)(c.StrictMode,{children:Object(i.jsx)(j,{})}))}},[[54,1,2]]]);
//# sourceMappingURL=main.dc877417.chunk.js.map